---
const navLinks = [
  { href: "/", text: "Home" },
  { href: "/ueber-mich", text: "Über Mich" },
  { href: "/bewerbung", text: "Angebot" },
]
const currentPath = Astro.url.pathname;
---
<header class="bg-background-primary/80 backdrop-blur-sm sticky top-0 z-50 border-b border-border-default/70">
  <div class="max-w-5xl mx-auto px-4 sm:px-6">
    <div class="py-4 md:py-0 md:h-16 md:flex md:items-center md:justify-between">
      <div class="flex items-center justify-between">
  <a href="/" class="text-xl font-bold text-text-primary transition-colors decoration-2 underline-offset-4 hover:underline hover:decoration-accent">Simon Haenel</a>
        <button id="mobile-nav-toggle"
                type="button"
                class="md:hidden inline-flex items-center justify-center rounded-lg border border-border-default/60 px-3 py-2 text-sm font-semibold text-text-primary hover:bg-background-secondary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-4 focus-visible:ring-offset-background-secondary"
                aria-expanded="false"
                aria-controls="primary-navigation">
          <span class="sr-only">Menü öffnen</span>
          <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>
      <nav id="primary-navigation"
           class="hidden w-full flex-col gap-4 border-t border-border-default/60 pt-4 text-base font-medium md:flex md:w-auto md:flex-row md:items-center md:gap-8 md:border-0 md:pt-0">
        {navLinks.map(link => {
          const isActive = currentPath === link.href || (link.href !== '/' && currentPath.startsWith(link.href));
          return (
            <a href={link.href}
               aria-current={isActive ? 'page' : undefined}
               class:list={[
                 'transition-colors pb-0.5',
                 isActive ? 'text-text-primary border-b-2 border-accent' : 'text-text-secondary hover:text-text-primary'
               ]}>
              {link.text}
            </a>
          );
        })}
      </nav>
    </div>
  </div>
</header>
<script is:inline>
  const toggle = document.getElementById('mobile-nav-toggle');
  const menu = document.getElementById('primary-navigation');
  if (toggle && menu) {
    const closeMenu = () => {
      toggle.setAttribute('aria-expanded', 'false');
      menu.classList.add('hidden');
    };
    toggle.addEventListener('click', () => {
      const expanded = toggle.getAttribute('aria-expanded') === 'true';
      toggle.setAttribute('aria-expanded', String(!expanded));
      menu.classList.toggle('hidden', expanded);
    });
    menu.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', closeMenu);
    });
  }
</script>
